function TimerUtilities(){}function handleAppleExpiration(){new Date-startTime>=appleIdle&&0!=appleIdle&&(window.location.href=appleUrl)}$(document).ready(function(){$("#EntitlementsWell").click(function(){$("#entitlementsTab").tab("show")}),$("#EndorsementsWell").click(function(){$("#endorsementsTab").tab("show")}),$(".tab-pane h2.h2.no-js-header").remove(),$("div.show-more.hidden").removeClass("hidden")}),define("driver_details",function(){});var handleAppleExpirationLoop,appleIdle,appleUrl,startTime=new Date;TimerUtilities.prototype.setPageExpiration=function(e,t,n){var r=navigator.userAgent;/(iPad|iPhone)/i.test(r)&&(handleAppleExpirationLoop&&clearInterval(handleAppleExpirationLoop),handleAppleExpirationLoop=setInterval("handleAppleExpiration()",500),appleIdle=t,appleUrl=n),e.idleTimer(t),e.on("idle.idleTimer",function(){window.location.href=n})},TimerUtilities.prototype.checkForExpiration=function(e,t){var n=new Date;n=n.getTime(),0==t.val().length?(t.val(n),e.show()):(t.val(""),location.reload())},define("timerUtilities",function(){}),define("miscellaneous",[],function(){$("#Entitlements, #Endorsements").removeClass("active"),$("a#EntitlementsWell").on("click",function(e){return e.preventDefault(),$("#Entitlements").tab("show"),!1}),$("a#EndorsementsWell").on("click",function(e){return e.preventDefault(),$("#Endorsements").tab("show"),!1})}),define("view-dl",[],function(){var e=$("div.tabbed-view > div"),t=function(t){e.hide(),e.filter(t).show(),$("div.tabbed-view ul.tabs a").removeClass("current"),$("div.tabbed-view ul.tabs a[href="+t+"]").addClass("current")},n=function(e){history.pushState?history.pushState(null,null,e):location.hash=e};$("div.tabbed-view ul.tabs a[href*=#]").click(function(){return n(this.hash),$(window).scrollTop(0),t(this.hash),!1});var r=$("div.tabbed-view ul.tabs a[href="+location.hash+"]");0==r.length&&(r=$("div.tabbed-view ul.tabs a[href*=#]:first")),r.click(),$(".accordion-content").hide(),$("a.toggle").on("click",function(e){return e.detail&&1!=e.detail?!1:($(this).parent().parent().find("div.accordion-content:first").slideToggle("fast"),$(this).find("span.more > span").toggleClass("up").toggleClass("down"),$(this).find("em").html($(this).find("span").is(".up")?$("#driverDetails").attr("data-accordian-show-text")+' <img alt="" src="'+$("#driverDetails").attr("data-assets-img-root")+'/circle-plus@2x.png" width="16px">':$("#driverDetails").attr("data-accordian-hide-text")+' <img alt="" src="'+$("#driverDetails").attr("data-assets-img-root")+'/circle-minus@2x.png" width="16px">'),!1)})}),function(e){var t=function(e,n,r){return 1===arguments.length?t.get(e):t.set(e,n,r)};t._document=document,t._navigator=navigator,t.defaults={path:"/"},t.get=function(e){return t._cachedDocumentCookie!==t._document.cookie&&t._renewCache(),t._cache[e]},t.set=function(n,r,o){return o=t._getExtendedOptions(o),o.expires=t._getExpiresDate(r===e?-1:o.expires),t._document.cookie=t._generateCookieString(n,r,o),t},t.expire=function(n,r){return t.set(n,e,r)},t._getExtendedOptions=function(n){return{path:n&&n.path||t.defaults.path,domain:n&&n.domain||t.defaults.domain,expires:n&&n.expires||t.defaults.expires,secure:n&&n.secure!==e?n.secure:t.defaults.secure}},t._isValidDate=function(e){return"[object Date]"===Object.prototype.toString.call(e)&&!isNaN(e.getTime())},t._getExpiresDate=function(e,n){switch(n=n||new Date,typeof e){case"number":e=new Date(n.getTime()+1e3*e);break;case"string":e=new Date(e)}if(e&&!t._isValidDate(e))throw new Error("`expires` parameter cannot be converted to a valid Date instance");return e},t._generateCookieString=function(e,t,n){e=encodeURIComponent(e),t=(t+"").replace(/[^!#$&-+\--:<-\[\]-~]/g,encodeURIComponent),n=n||{};var r=e+"="+t;return r+=n.path?";path="+n.path:"",r+=n.domain?";domain="+n.domain:"",r+=n.expires?";expires="+n.expires.toUTCString():"",r+=n.secure?";secure":""},t._getCookieObjectFromString=function(n){for(var r={},o=n?n.split("; "):[],i=0;i<o.length;i++){var a=t._getKeyValuePairFromCookieString(o[i]);r[a.key]===e&&(r[a.key]=a.value)}return r},t._getKeyValuePairFromCookieString=function(e){var t=e.indexOf("=");return t=0>t?e.length:t,{key:decodeURIComponent(e.substr(0,t)),value:decodeURIComponent(e.substr(t+1))}},t._renewCache=function(){t._cache=t._getCookieObjectFromString(t._document.cookie),t._cachedDocumentCookie=t._document.cookie},t._areEnabled=function(){return t._navigator.cookieEnabled||"1"===t.set("cookies.js",1).get("cookies.js")},t.enabled=t._areEnabled(),"function"==typeof define&&define.amd?define("cookies",[],function(){return t}):"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=t),exports.Cookies=t):window.Cookies=t}(),define("formFiller",["cookies"],function(e){function t(){$("form").find("input").each(function(e,t){var n=$(t);r[n.attr("name")]&&"gender"!==n.attr("name")&&!n.attr("disabled")&&n.val(r[n.attr("name")])});for(var e=document.getElementsByTagName("form")[0].getElementsByTagName("select"),t=0;t<e.length;t++)document.forms[0][e[t].name]&&!element.attr("disabled")&&(e[t].value=r[e[t].name]);r.gender&&"1"==r.gender&&!element.attr("disabled")?$("#male").attr("checked","checked"):$("#male").removeAttr("checked"),r.gender&&"2"==r.gender&&!element.attr("disabled")?$("#female").attr("checked","checked"):$("#female").removeAttr("checked")}$("form").on("submit",function(){e.set("naturalSubmit",!0)});var n=e.get("naturalSubmit"),r=$("#formData").attr("data-form");if("undefined"!=typeof r){var o=JSON.parse(r);"undefined"!=typeof o&&(n||"dontFill"!==e.get("formAction")?(n&&e.set("naturalSubmit",void 0),t(),e.set("formAction","dontFill"),$("#formData").remove()):(e.set("formAction",void 0),document.location.href=document.location.href.replace("/error","")))}}),define("FieldValidator",[],function(){var e=function(){var e,t,n,r,o,i,a,l,s="",d=function(s,d,f,m,p,v){e=f,t=d,n=m,a=p,l=null==v?!0:v,r=$("#"+s),o=$("#"+s+"-control-group"),i=$("#"+s+"-help"),r.on("focusout",function(){window.setTimeout(c,100)}).on("focus",u)},c=function(){s="";var n=r.val();return $.isFunction(a)&&(n=a(n),r.val(n)),s=n,1==l&&""==n?(o.addClass("form-group-error"),o.children("input[type=text]").addClass("form-control-error"),i.text(e),!1):f(n)?(o.removeClass("form-group-error"),o.children("input[type=text]").removeClass("form-control-error"),i.text(""),!0):(o.addClass("form-group-error"),o.children("input[type=text]").addClass("form-control-error"),i.text(t),!1)},u=function(){o.removeClass("form-group-error"),o.children("input[type=text]").removeClass("form-control-error"),i.text(""),$.isFunction(a)&&r.val(s)},f=function(e){if(0==n.length)return!0;if(""==e&&!l)return!0;for(var t=0;t<n.length;t++)if(null!=e.match(n[t]))return!0;return!1};return{init:d,validate:c,removeValidationError:u}};return e}),define("dobValidator",[],function(){var e=window.dvla=window.dvla||{};e.dobValidator=function(){var e,t,n,r,o,i,a=function(){o.removeClass("form-group-error"),i.text("")},l=function(l,d,c,u){emptyMessage=d,e=c,underAgeMessage=u,o=$("#"+l+"-control-group"),t=o.find("input#dob_year"),n=o.find("input#dob_month"),r=o.find("input#dob_day"),i=$("#"+l+"-help"),t.on("focusout",s).on("focus",a),n.on("focusout",s).on("focus",a),r.on("focusout",s).on("focus",a)},s=function(){function a(){return o.addClass("form-group-error"),i.text(emptyMessage),!1}function l(){return o.addClass("form-group-error"),i.text(e),!1}function s(){return o.addClass("form-group-error"),i.text(underAgeMessage),!1}if(""==t.val()&&n.val()<=0&&r.val()<=0)return a();if(t.val()<1900||n.val()<=0||r.val()<=0)return l();var d=new Date(t.val(),n.val()-1,r.val());if(d.getMonth()+1!=n.val()||d.getDate()!=r.val()||d.getFullYear()!=t.val())return l();var c=new Date;if(c.setHours(0),c.setMinutes(0),c.setSeconds(0),c.setMilliseconds(0),d>c)return l();var u=new Date;return u.setFullYear(u.getFullYear()-15),u.setMonth(u.getMonth()-9),u.setHours(0),u.setMinutes(0),u.setSeconds(0),u.setMilliseconds(0),d>u?s():!0};return{init:l,validate:s,removeValidationError:a}}}),require(["driver_details","timerUtilities","miscellaneous","view-dl","formFiller","FieldValidator","dobValidator","cookies"]),define("main",function(){});
//# sourceMappingURL=main.js.map